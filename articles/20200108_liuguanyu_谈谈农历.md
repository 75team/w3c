还有不到20多天，2020年的农历春节就要到了。对于中国人来讲，农历春节是一年最隆重的节日。笔者曾经编写过[农历计算的程序](http://hao.360.com/rili/#cid=youlike)。为此调研过一段农历的算法。我国现行的农历，经过了若干次迭代，形成了如今的版本。农历，精确地反映了太阳、地球、月亮的天体运动的相对位置。2016年11月30日，农历中的二十四节气被正式列入联合国教科文组织人类非物质文化遗产代表作名录。那么，农历是如何定义的，年份又是如何计算的，农历的月是如何划分的，二十四节气的天文学意义是什么以及如何用计算机推算农历？这篇文章将给大家做比较详细的解答。

古人将日月分别称为太阳和太阴，从常识我们了解到，每个月的农历十五日是月圆之日；初八前后，月亮东暗西明，称为上弦月；农历二十三前后，月亮西暗东明，称为下弦月。此外还有朔月、望月等等，我们可以看到，农历比较准确地反映了月相的变化。

![](https://p5.ssl.qhimg.com/t014237650677f19d88.jpg)

习惯上，很多人会将我们的农历称为阴历。这实际是一种讹传。实际上，农历不仅可以反映月相的变化，同时，可以和现行广泛使用的太阳历（格里高利历，即现行公历）对应，反映地球绕太阳公转的相对位置以及寒暑变化。因此，农历实际是一种阴阳历。

由于历法有确切的天文学定义，同时要兼顾地球公转和月亮绕地球旋转的位置，历法会比公历稍显复杂，不过，掌握了农历，会对地月日运动关系有更深的理解，也是掌握潮汐变化、日月食预测等等的利器。

接下来，我们就来简单描述一下农历的历法：


1. 以东八区北京时间为标准时间。 
1. 地球自转一周的时间约为一天；月亮月相变化的一个周期为一个月；地球绕太阳旋转一周约为一年。
1. 每个朔日即无法看见月亮的日期为每月起点，即初一。
1. 包含冬至的月份为十一月，也即冬月。
1. 相邻两个冬月之间为一年。
1. 冬月后的第二个非闰月，为正月。
1. 将没有中气的那个朔望月置为闰月。

规则较为繁复，我们依次来解说之。

由于地球自转，世界各地时刻不一致。现行的中国农历习惯上以北京时间（东经120度经线所在时刻）作为参考，而1929年以前的阴历，则以北京即东经116度25分的当地时为准。实际上，根据农历的法则可以选用任意的地理位置，如越南和韩国都使用农历，但参考位置不同。

地球自转一周时间约为23时56分4秒；月相变化周期约为29.530589天，因此，农历有大小月之分，大月30天，小月29天；地球绕太阳公转一周的时间约为365.256363004天，每年会有一定的误差，因此，各种历法都考虑了闰年的方案。现行的公历（格里高利历），采用每4年增加一个闰日，同时对整百年，取消3次闰年，使得历法与公转年近似一致。我们的农历现行使用19年7闰的方式来进行调整，原理在于`365.256363004/29.530589`约等于`12.368746285554954`也即一个回归年要多出`0.368746285554954`个月。将其乘以`19`，得到`7.006179425544126`。这也即19年7个闰月的原理。与公历不同，农历的闰，是闰一个月。比如2020年的闰四月就整整闰出29天。

农历的纪年比较有特色，使用天干和地支进行搭配来达到计数的目的。

天干为：甲乙丙丁戊己庚辛壬癸；地支为：子丑寅卯辰巳午未申酉戌亥。

每一年由天干按顺序选出一位，地支按顺序选出一位，和为干支纪年。古人常用这种方式来描述年份，如王羲之的《兰亭集序》“永和九年，岁在癸丑”。

每一个干支纪年周期以甲子为始，以癸亥为终，癸亥之后再从甲子开始。有副对联描述这个现象：“一岁两春双八月人间两度春秋，六旬花甲再周天世上重逢甲子”。上联说的是闰八月，下联讲的就是纪年周期。

为了便于记忆，人们还给十二地支配以十二个动物生肖，所以有：子鼠丑牛寅虎卯兔辰龙巳蛇午马未羊申猴酉鸡戌狗亥猪。因此，2020年就是农历庚子鼠年。

![](https://p5.ssl.qhimg.com/t01b65070dd48821df6.jpg)

除了干支纪年，人们也用干支记录月与日。如1949年10月1日为：己丑年癸酉月甲子日。循环方式与纪年法无异。同样是周期为60的周期函数。

农历的月份划分是以朔日作为标准的。朔日，即当天月球恰好运行至与太阳黄经相等，称为朔。月球运行到地球和太阳之间，和太阳几乎同时出没，在地球上看不到月亮。朔日也是经常发生日食的时候。

既然规则是如此定义的，那么如何从算法上推算朔日呢？

在上面的规则中，我们发现，农历定准的起点是冬至所在的月。那么为什么会以冬至作为标准呢？古代对于日相的观测，是以日影长短作为标志的，而冬至日是正午日影最长的那一天。这个观测是最为简便和准确的，按天文学定义，即是太阳黄道经270度所在的日期，因此冬至日成为了农历计算时最重要的参照物。

![](https://p1.ssl.qhimg.com/t012e6e69b1a32a127f.jpg)

定出了起点，下面就是二十四节气的舞台了，与反映月相变化不同，二十四节气则是反映地球绕太阳公转的位置，也即通常意义的寒暑变化。这是农历是阴阳合历的重要佐证。所谓“节”和“气”是独立的概念。一年中的十二节和十二气合为二十四节气。下图是平年中二十四节气与农历十二个月的分布关系。

![](https://p5.ssl.qhimg.com/t01686af3a4333dc66c.jpg)

一般情况下，一个农历月包含一个“节”和一个“气”。“节”又称为节令，“气”又称为“中气”。现行农历中，把不包含中气的月置闰。巧合的是，19年中的无中气月恰好为7个，因此，中气置闰法完美地解决了置闰难题。同时，由于是根据自然形成，并非人为指定。所以该方法还较好地反映了天体运行的规律。德国天文学家总结的开普勒三大定律告诉我们，地球绕太阳公转的轨道近似是一个椭圆形，太阳近似位于椭圆轨道的焦点。当北半球夏至前后，地球位于远日点。从太阳到行星所联接的直线在相等时间内扫过同等的面积。因此，位于远日点的地球此时角速度变慢，所以在一个月中出现无中气现象的概率大大增加。所以我们看到的闰月常常分布在年中这几个月，而绝少出现在年首和年尾。

除了二十四节气，农历中还有数九和伏天的规则。

数九的规则比较简单：以冬至为一九第一天，每9天为一个周期。第十天为二九第一天，依次类推。经过八十一天，即在惊蛰与春分之间，表示冬去春来。

伏天的计算稍复杂一些，会用到之前提到的干支法来记日。自夏至开始，依照干支纪日的排列，第3个庚日为初伏，第4个庚日为中伏，立秋后第1个庚日为末伏。例如：2020年的夏至日为公历：6月21日，当日为乙未日，则初伏需要按顺序找到第3个庚日，我们看到公历7月16日为庚申日。因此初伏第一天为公历2020年7月16日。根据定义，初伏一般都为十天，因此，7月26日庚午日为中伏第一天。而8月15日是立秋后第一个庚日：庚寅日。由于立秋的日期和干支日的配合，中伏可为10天或20天。

数九或者伏天，是从寒至暖或是从暑热到清凉的过渡。这里无论以九作为进制还是用十作为单位，人为规定的意义都要大于其天文学的含义。

